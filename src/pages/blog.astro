---
import Card from "../components/Card.astro";
import Layout from "../layouts/Layout.astro";
import Showcase from "../components/Showcase.astro";
// const response = await fetch('https://jsonplaceholder.typicode.com/posts?_limit=5');
// const posts: Post[] = await response.json();

// interface Post {
//     title: string;
//     body: string;
//     id: number;
//     userId: number;
// }


const posts = await Astro.glob('../posts/*.md');

console.log(posts);
---

<Layout title="astro-blog">
    <Showcase heading="Astro Blog" text="A simple blog built with astro"/>
    <section class="page-content">
        <div class="container">
            <!-- // Api post fetching
                {posts.map(post => (
                <Card>
                    <h3>{post.title}</h3>
                    <p>{post.body}</p>    
                </Card>
            ))} -->

            {posts.map(post => (
                <Card>
                    <h3>{post.frontmatter.title}</h3>
                    <p>{post.frontmatter.excerpt}</p>
                    <a href={`/${post.frontmatter.slug}`} class="btn">Read More</a>  
                </Card>
                ))}
        </div>
    </section>
</Layout>